# Skolapp v3 Environment Configuration
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# REQUIRED VARIABLES
# These are essential for the application to function
# =============================================================================

# Supabase Configuration
# Get these from your Supabase project settings: https://app.supabase.com/project/[PROJECT]/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ⚠️ CRITICAL: Never commit this to version control - service role has admin privileges
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# =============================================================================
# AI FEATURES (OpenAI Integration)
# Required for AI-powered quiz generation
# =============================================================================

# OpenAI API Key - Get from https://platform.openai.com/api-keys
# ⚠️ CRITICAL: Never commit this to version control
OPENAI_API_KEY=sk-...

# Optional: OpenAI Project ID (for better organization and billing)
OPENAI_PROJECT_ID=proj_...

# Optional: Custom OpenAI Base URL (for enterprise or proxy setups)
# OPENAI_BASE_URL=https://api.openai.com/v1

# =============================================================================
# LIVE QUIZ FEATURES (Ably Real-time)
# Required for live quiz sessions with real-time updates
# =============================================================================

# Ably API Key - Get from https://ably.com/dashboard
# Format: appId.keyId:keySecret
# ⚠️ CRITICAL: Never commit this to version control
ABLY_API_KEY=your_app_id.key_id:key_secret

# Server API key for health checks and admin operations
ABLY_SERVER_API_KEY=your_app_id.server_key_id:server_key_secret

# Token TTL in seconds (default: 3600 = 1 hour)
ABLY_TOKEN_TTL_SECONDS=3600

# Optional: Subscribe-only key for public displays (safe to expose in frontend)
# NEXT_PUBLIC_ABLY_SUBSCRIBE_KEY=your_subscribe_only_key

# Enable live quiz features in the UI
NEXT_PUBLIC_FEATURE_LIVE_QUIZ=true

# =============================================================================
# PAYMENT PROCESSING (Stripe)
# Required for subscription and billing features
# =============================================================================

# Stripe Secret Key - Get from https://dashboard.stripe.com/apikeys
# ⚠️ CRITICAL: Never commit this to version control
STRIPE_SECRET_KEY=sk_test_...

# Stripe Webhook Secret for secure webhook verification
# ⚠️ CRITICAL: Never commit this to version control
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Price IDs (public - safe to expose)
NEXT_PUBLIC_STRIPE_PRICE_MONTHLY=price_1234567890
NEXT_PUBLIC_STRIPE_PRICE_ANNUAL=price_0987654321

# =============================================================================
# SWEDISH CURRICULUM INTEGRATION (Skolverket)
# Required for curriculum-aligned content generation
# =============================================================================

# Enable Skolverket syllabus integration
FEATURE_SYLLABUS=true

# Base URL for Skolverket Syllabus API
SYLLABUS_BASE_URL=https://api.skolverket.se/syllabus

# Refresh schedule for curriculum data (used by GitHub Actions)
# Options: daily, weekly, monthly
SYLLABUS_REFRESH_CRON=weekly

# =============================================================================
# SYSTEM ADMINISTRATION
# Required for system operations and maintenance
# =============================================================================

# Admin API Key for system operations (quota reset, user management, etc.)
# ⚠️ CRITICAL: Never commit this to version control
ADMIN_API_KEY=admin_your_secure_random_key_here

# =============================================================================
# DEVELOPMENT & TESTING
# Optional variables for development workflow
# =============================================================================

# Node environment (automatically set by Next.js)
# NODE_ENV=development

# Next.js app URL for testing and development
# NEXT_PUBLIC_APP_URL=http://localhost:3000

# Enable debug logging for development
# DEBUG=true

# =============================================================================
# CI/CD SPECIFIC VARIABLES
# These are typically set in GitHub Actions secrets
# =============================================================================

# Base URL for E2E tests (staging/production)
# SKOLAPP_BASE_URL=https://stage.skolapp.se

# Test user credentials for E2E testing
# TEST_USER_EMAIL=test@example.com
# TEST_USER_PASSWORD=secure_test_password

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. NEVER commit .env.local to version control
# 2. Use strong, unique API keys for each environment
# 3. Regularly rotate sensitive credentials
# 4. Use different keys for development, staging, and production
# 5. Monitor API usage and set up billing alerts
# 6. Enable 2FA on all service accounts (Supabase, OpenAI, Ably, Stripe)

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# If you encounter issues:
# 1. Verify all required variables are set
# 2. Check that API keys are valid and not expired
# 3. Ensure proper permissions on service role keys
# 4. Run `npm run validate:env` to check configuration
# 5. Check the application logs for specific error messages

# For more information, see:
# - README.md for setup instructions
# - docs/environment-setup.md for detailed configuration guide